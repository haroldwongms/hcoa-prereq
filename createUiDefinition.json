{
  "$schema": "https://schema.management.azure.com/schemas/0.1.2-preview/CreateUIDefinition.MultiVm.json",
  "handler": "Microsoft.Azure.CreateUIDef",
  "version": "0.1.2-preview",
  "parameters": {
    "basics": [{
    }],
    "steps": [{
      "name": "infrastructureSettings",
      "label": "Infrastructure Settings",
      "subLabel": {
        "preValidation": "Configure Infrastructure Settings",
        "postValidation": "Done"
      },
      "bladeTitle": "Horizon Cloud on Azure Prerequisites",
      "elements": [{
        "name": "virtualNetwork",
        "type": "Microsoft.Network.VirtualNetworkCombo",
        "label": {
          "virtualNetwork": "Virtual network",
          "subnets": "Subnets"
        },
        "defaultValue": {
          "name": "vnet01",
          "addressPrefixSize": "/16"
        },
        "toolTip": {
          "virtualNetwork": "",
          "subnets": ""
        },
        "constraints": {
          "minAddressPrefixSize": "/16"
        },
        "options": {
          "hideExisting": true
        },
        "subnets": {
          "subnet1": {
            "label": "Management subnet",
            "defaultValue": {
              "name": "subnet-1",
              "addressPrefixSize": "/24"
            },
            "constraints": {
              "minAddressPrefixSize": "/24",
              "minAddressCount": 12,
              "requireContiguousAddresses": true
            }
          },
          "subnet2": {
            "label": "Second subnet",
            "defaultValue": {
              "name": "subnet-2",
              "addressPrefixSize": "/26"
            },
            "constraints": {
              "minAddressPrefixSize": "/26",
              "minAddressCount": 8,
              "requireContiguousAddresses": true
            }
          }
        },
        "visible": true
        }]
    }],
    "outputs": {
      "vmAnsibleTowerUsername": "[basics('vmAnsibleTowerUsername')]",
      "sshKeyData": "[basics('adminPassword').sshPublicKey]",
      "vmSize": "[steps('infrastructureSettings').vmSize]",
      "vmTowerName": "[steps('infrastructureSettings').vmTowerName]",
      "ansibleTowerAdminPassword": "[steps('ansibleTowerSettings').ansibleTowerAdminPassword]",
      "ansibleTowerDatabasePassword": "[steps('ansibleTowerSettings').ansibleTowerDatabasePassword]"
    }
  }
}
